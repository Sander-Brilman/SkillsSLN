@page "/"
@using Playground.Shared;
@inject HttpClient _httpClient;
<PageTitle>Index</PageTitle>

<h1>Hello, world!</h1>

Welcome to your new app.


<EditForm Model="loginInfo" class="mb-3" OnValidSubmit="OnSubmit">
    <DataAnnotationsValidator></DataAnnotationsValidator>
    <ValidationSummary></ValidationSummary>

    <label class="d-block mb-2">
        Username
        <input  @bind="loginInfo.Email" type="email"/>
    </label>


    <label class="d-block mb-2">
        ww
        <input @bind="loginInfo.Password" type="text" />
    </label>

    <button type="submit" class="btn btn-success">Inloggen</button>
</EditForm>


<h2>Result from API: @text</h2>
<button class="btn btn-primary" @onclick="FetchText">Fetch from logged in user</button>


@code {
    string text = "";


    LoginDTO loginInfo = new();

    async Task OnSubmit()
    {
        var resonse = await _httpClient.PostAsJsonAsync("/api/user/login", loginInfo);


        text = $"response: {resonse.StatusCode}";

    }

    async Task FetchText()
    {
        var response = await _httpClient.GetAsync("/api/user/text");

        text = await response.Content.ReadAsStringAsync();
    }
}